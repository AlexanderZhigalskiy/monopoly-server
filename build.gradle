// build.gradle
plugins {
    id 'org.jetbrains.kotlin.jvm' version '1.9.0'
    id 'application'
    id 'org.jetbrains.kotlin.plugin.serialization' version '1.9.0'
}

group = 'com.monopoly'
version = '1.0.0'

repositories {
    mavenCentral()
}

dependencies {
    // Ktor
    implementation "io.ktor:ktor-server-core:2.3.5"
    implementation "io.ktor:ktor-server-netty:2.3.5"
    implementation "io.ktor:ktor-server-content-negotiation:2.3.5"
    implementation "io.ktor:ktor-serialization-kotlinx-json:2.3.5"
    implementation "io.ktor:ktor-server-cors:2.3.5"

    // Database - PostgreSQL
    implementation "org.postgresql:postgresql:42.6.0"

    // Connection pool
    implementation "com.zaxxer:HikariCP:5.1.0"

    // Logging
    implementation "ch.qos.logback:logback-classic:1.4.11"
}

application {
    mainClass = 'com.monopoly.ApplicationKt'
}

compileKotlin {
    kotlinOptions.jvmTarget = "17"
}

jar {
    manifest {
        attributes 'Main-Class': 'com.monopoly.ApplicationKt'
    }
    from {
        configurations.runtimeClasspath.collect { it.isDirectory() ? it : zipTree(it) }
    }
    duplicatesStrategy = DuplicatesStrategy.EXCLUDE
}